---
title: Jenkins
description: 오픈소스 자동화 서버
---

Jenkins는 소프트웨어 개발에서 빌드, 테스트, 배포를 자동화하는 CI/CD 도구입니다.

## 주요 특징

- **플러그인 생태계**: 1800개 이상의 플러그인
- **파이프라인**: 코드로 작성하는 CI/CD
- **분산 빌드**: 여러 머신에서 동시 실행
- **다양한 통합**: Git, Docker, Kubernetes 등
- **무료 오픈소스**: 무료로 사용 가능

## 설치하기

```bash
# Docker로 설치
docker run -d -p 8080:8080 -p 50000:50000 \
  -v jenkins_home:/var/jenkins_home \
  --name jenkins \
  jenkins/jenkins:lts

# 초기 비밀번호 확인
docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPassword
```

## Jenkinsfile (Declarative Pipeline)

```groovy
pipeline {
    agent any
    
    environment {
        DOCKER_IMAGE = 'myapp'
        DOCKER_TAG = "${BUILD_NUMBER}"
    }
    
    stages {
        stage('Checkout') {
            steps {
                git branch: 'main', url: 'https://github.com/user/repo.git'
            }
        }
        
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }
        
        stage('Test') {
            steps {
                sh 'npm test'
            }
        }
        
        stage('Build') {
            steps {
                sh 'npm run build'
            }
        }
        
        stage('Docker Build') {
            steps {
                sh """
                    docker build -t ${DOCKER_IMAGE}:${DOCKER_TAG} .
                    docker tag ${DOCKER_IMAGE}:${DOCKER_TAG} ${DOCKER_IMAGE}:latest
                """
            }
        }
        
        stage('Deploy') {
            steps {
                sh """
                    docker stop myapp || true
                    docker rm myapp || true
                    docker run -d -p 3000:3000 --name myapp ${DOCKER_IMAGE}:latest
                """
            }
        }
    }
    
    post {
        success {
            echo '배포 성공!'
        }
        failure {
            echo '배포 실패'
        }
        always {
            cleanWs()
        }
    }
}
```

## Scripted Pipeline

```groovy
node {
    stage('Checkout') {
        checkout scm
    }
    
    stage('Build') {
        try {
            sh 'npm install'
            sh 'npm run build'
        } catch (Exception e) {
            currentBuild.result = 'FAILURE'
            throw e
        }
    }
    
    stage('Test') {
        sh 'npm test'
    }
    
    stage('Deploy') {
        if (env.BRANCH_NAME == 'main') {
            sh 'npm run deploy'
        }
    }
}
```

## 멀티 브랜치 파이프라인

```groovy
pipeline {
    agent any
    
    stages {
        stage('Build') {
            steps {
                echo "Building ${env.BRANCH_NAME}"
                sh 'npm run build'
            }
        }
        
        stage('Test') {
            steps {
                sh 'npm test'
            }
        }
        
        stage('Deploy to Dev') {
            when {
                branch 'develop'
            }
            steps {
                echo 'Deploying to Development'
                sh 'npm run deploy:dev'
            }
        }
        
        stage('Deploy to Prod') {
            when {
                branch 'main'
            }
            steps {
                input message: 'Deploy to production?'
                echo 'Deploying to Production'
                sh 'npm run deploy:prod'
            }
        }
    }
}
```

## Docker 통합

```groovy
pipeline {
    agent {
        docker {
            image 'node:18'
        }
    }
    
    stages {
        stage('Build') {
            steps {
                sh 'npm install'
                sh 'npm run build'
            }
        }
    }
}
```

## 병렬 실행

```groovy
pipeline {
    agent any
    
    stages {
        stage('Tests') {
            parallel {
                stage('Unit Tests') {
                    steps {
                        sh 'npm run test:unit'
                    }
                }
                stage('Integration Tests') {
                    steps {
                        sh 'npm run test:integration'
                    }
                }
                stage('E2E Tests') {
                    steps {
                        sh 'npm run test:e2e'
                    }
                }
            }
        }
    }
}
```

## 환경 변수

```groovy
pipeline {
    agent any
    
    environment {
        DB_HOST = credentials('db-host')
        API_KEY = credentials('api-key')
    }
    
    stages {
        stage('Deploy') {
            environment {
                DEPLOY_ENV = 'production'
            }
            steps {
                sh '''
                    echo "Deploying to ${DEPLOY_ENV}"
                    echo "DB Host: ${DB_HOST}"
                '''
            }
        }
    }
}
```

## Webhook 설정

```bash
# GitHub Webhook URL
http://jenkins-url:8080/github-webhook/

# GitLab Webhook URL
http://jenkins-url:8080/project/your-project
```

## 언제 사용하나요?

- CI/CD 파이프라인 구축
- 자동 빌드 및 테스트
- 자동 배포
- 정기적인 작업 스케줄링
- 온프레미스 환경

## 추가 자료

- [공식 문서](https://www.jenkins.io/doc/)
- [Jenkins Pipeline](https://www.jenkins.io/doc/book/pipeline/)

